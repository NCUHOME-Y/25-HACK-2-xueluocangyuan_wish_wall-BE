# Wish Wall åç«¯æœåŠ¡ (25-HACK-2-xueluocangyuan_wish_wall-BE) ğŸš€
2025 Hackweek ç¬¬2ç»„ ä»£ç åˆ«å’Œæˆ‘ä½œé˜Ÿ é›ªè½è—æ„¿è®¸æ„¿å¢™ åç«¯ä»“åº“


## ç›®å½•
- [Wish Wall åç«¯æœåŠ¡ (25-HACK-2-xueluocangyuan\_wish\_wall-BE) ğŸš€](#wish-wall-åç«¯æœåŠ¡-25-hack-2-xueluocangyuan_wish_wall-be-)
  - [ç›®å½•](#ç›®å½•)
  - [ğŸ“ é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
    - [âœ¨ æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
  - [ğŸ“ æ–‡ä»¶ç›®å½•è¯´æ˜](#-æ–‡ä»¶ç›®å½•è¯´æ˜)
  - [ğŸ§­ ä¸Šæ‰‹æŒ‡å—](#-ä¸Šæ‰‹æŒ‡å—)
    - [å¼€å‘å‰çš„é…ç½®è¦æ±‚](#å¼€å‘å‰çš„é…ç½®è¦æ±‚)
    - [å®‰è£…ä¸å¯åŠ¨](#å®‰è£…ä¸å¯åŠ¨)
    - [å¼€å‘çš„æ¶æ„](#å¼€å‘çš„æ¶æ„)
    - [éƒ¨ç½²](#éƒ¨ç½²)
  - [ğŸ”‘ ç¯å¢ƒå˜é‡é…ç½® (.env)](#-ç¯å¢ƒå˜é‡é…ç½®-env)
      - [å…¬å¼€æ¥å£ (æ— éœ€è®¤è¯)](#å…¬å¼€æ¥å£-æ— éœ€è®¤è¯)
      - [è®¤è¯æ¥å£ (éœ€è¦ `Authorization: Bearer <token>`)](#è®¤è¯æ¥å£-éœ€è¦-authorization-bearer-token)
      - [API è¯¦æƒ…ç¤ºä¾‹](#api-è¯¦æƒ…ç¤ºä¾‹)
    - [ğŸ› ï¸ ä½¿ç”¨åˆ°çš„æ¡†æ¶](#ï¸-ä½¿ç”¨åˆ°çš„æ¡†æ¶)
    - [ğŸ“¦ ç‰ˆæœ¬æ§åˆ¶](#-ç‰ˆæœ¬æ§åˆ¶)
    - [ğŸ‰ é¸£è°¢](#-é¸£è°¢)


---

## ğŸ“ é¡¹ç›®ç®€ä»‹
é›ªè½è—æ„¿ (Wish Wall) æ˜¯ä¸€ä¸ªå¸®åŠ©ç”¨æˆ·å‘å¸ƒæ„¿æœ›ã€è¿›è¡Œå…¬å¼€/ç§å¯†åˆ†äº«çš„åº”ç”¨ã€‚æœ¬é¡¹ç›®æ˜¯å…¶åç«¯æœåŠ¡ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€æ•°æ®å­˜å‚¨å’Œç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½
- **ç”¨æˆ·è®¤è¯**: åŸºäº JWT (HS256) çš„æ³¨å†Œå’Œç™»å½•æµç¨‹ã€‚
- **æ„¿æœ›ç®¡ç†**: ç”¨æˆ·å¯ä»¥åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹è‡ªå·±çš„ç§å¯†æ„¿æœ›å’Œå…¬å…±æ„¿æœ›åˆ—è¡¨ã€‚
- **ç¤¾äº¤äº’åŠ¨**: æ”¯æŒå¯¹å…¬å…±æ„¿æœ›è¿›è¡Œç‚¹èµã€å–æ¶ˆç‚¹èµå’Œå‘è¡¨è¯„è®ºã€‚
- **AI å†…å®¹å®¡æ ¸**: é›†æˆ [Silicon Flow](https://siliconflow.cn/) APIï¼Œåœ¨ç”¨æˆ·æ³¨å†Œï¼ˆæ˜µç§°ï¼‰ã€å‘å¸ƒæ„¿æœ›ã€å‘è¡¨è¯„è®ºæ—¶è‡ªåŠ¨è¿›è¡Œå†…å®¹å®‰å…¨å®¡æ ¸ã€‚
- **åŠ¨æ€åŠŸèƒ½è·¯ç”±**: é€šè¿‡ç¯å¢ƒå˜é‡ `ACTIVE_ACTIVITY` æ§åˆ¶ API æ¨¡å¼ï¼ˆä¾‹å¦‚ `v1` ä¸ºè¯»å†™æ¨¡å¼ï¼Œ`v2` ä¸ºåªè¯»æ¨¡å¼ï¼‰ï¼Œå‚è§ `internal/router/router.go`ã€‚
- **å®¹å™¨åŒ–éƒ¨ç½²**: æä¾›å®Œæ•´çš„ `Dockerfile` å’Œ `docker-compose.yml`ï¼Œå®ç° Nginxã€Go åº”ç”¨ã€MySQL æ•°æ®åº“çš„ä¸€é”®å¯åŠ¨ã€‚
- **æ•°æ®åº“å¡«å…… (Seeding)**: åœ¨é `release` æ¨¡å¼ä¸‹å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨å¡«å……æœºå™¨äººç”¨æˆ·å’Œæ„¿æœ›æ•°æ®ï¼Œä¾¿äºå¼€å‘å’Œæµ‹è¯•ï¼Œå‚è§ `internal/pkg/seeder/seeder.go`ã€‚
- **è§’è‰²ç³»ç»Ÿ**: åŸºç¡€çš„ç”¨æˆ·è§’è‰²å®šä¹‰ (å¦‚ `user`, `admin`)ï¼Œç”¨äºæƒé™æ§åˆ¶ï¼ˆå¦‚åˆ é™¤è¯„è®ºï¼‰ï¼Œå‚è§ `internal/app/model/user.go`ã€‚

---

## ğŸ“ æ–‡ä»¶ç›®å½•è¯´æ˜

â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡ ( åŒ…å«æ•°æ®åº“å¯†ç ã€JWTå¯†é’¥ã€AI Key)
â”œâ”€â”€ .gitignore           # Git å¿½ç•¥é…ç½®ï¼Œé˜²æ­¢ .env ç­‰æ•æ„Ÿæ–‡ä»¶ä¸Šä¼ 
â”œâ”€â”€ docker-compose.yml   # Docker ç¼–æ’æ–‡ä»¶ (ä¸€é”®å¯åŠ¨ Nginx, Go App, MySQL)
â”œâ”€â”€ Dockerfile           # Go åº”ç”¨çš„ Docker é•œåƒé…ç½®æ–‡ä»¶ (å¤šé˜¶æ®µæ„å»º)
â”œâ”€â”€ go.mod               # Go æ¨¡å—ä¾èµ–
â”œâ”€â”€ go.sum               # ä¾èµ–æ ¡éªŒ
â”œâ”€â”€ README.md           
â”‚
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ myapp/
â”‚       â””â”€â”€ main.go      # Go åº”ç”¨ä¸»å…¥å£ (åˆå§‹åŒ–æ—¥å¿—ã€æ•°æ®åº“ã€è·¯ç”±)
â”‚
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ handler/     # HTTP å¤„ç†å™¨ (Gin çš„ Ctx åœ¨è¿™é‡Œï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘)
â”‚   â”‚   â”‚   â”œâ”€â”€ app.go             # (GetAppState, TestAI)
â”‚   â”‚   â”‚   â”œâ”€â”€ app_test.go
â”‚   â”‚   â”‚   â”œâ”€â”€ comment.go         # (CreateComment, DeleteComment, ListCommentsByWish)
â”‚   â”‚   â”‚   â”œâ”€â”€ comment_test.go   
â”‚   â”‚   â”‚   â”œâ”€â”€ CreatWish.go       # (CreateWish)
â”‚   â”‚   â”‚   â”œâ”€â”€ DeleteWish.go      # (DeleteWish)
â”‚   â”‚   â”‚   â”œâ”€â”€ GetMyWish.go       # (GetMyWishes)
â”‚   â”‚   â”‚   â”œâ”€â”€ GetPublicWish.go   # (GetPublicWishes)
â”‚   â”‚   â”‚   â”œâ”€â”€ interactions.go    # (CreateCommentAI, CreateReplyAI, GetInteractions)
â”‚   â”‚   â”‚   â”œâ”€â”€ like.go            # (LikeWish)
â”‚   â”‚   â”‚   â”œâ”€â”€ like_test.go
â”‚   â”‚   â”‚   â”œâ”€â”€ main_test.go       # æµ‹è¯•ä¸»å…¥å£ (Setup/Cleanup)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.go            # (Register, Login, GetUserMe, UpdateUser)
â”‚   â”‚   â”‚   â”œâ”€â”€ user_test.go
â”‚   â”‚   â”‚   â”œâ”€â”€ wishes.go          # (å·²è¢«æ‹†åˆ†åˆ° CreatWish ç­‰æ–‡ä»¶)
â”‚   â”‚   â”‚   â””â”€â”€ wishes_test.go
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ model/           # GORM æ•°æ®åº“æ¨¡å‹ (Struct å®šä¹‰)
â”‚   â”‚   â”‚   â”œâ”€â”€ comment.go    
â”‚   â”‚   â”‚   â”œâ”€â”€ like.go       
â”‚   â”‚   â”‚   â”œâ”€â”€ user.go       
â”‚   â”‚   â”‚   â””â”€â”€ wish.go       
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ repository/      # æ•°æ®åº“æ“ä½œ (æ‚¨æåˆ°è¿™éƒ¨åˆ†æœªå¯ç”¨)
â”‚   â”‚   â”‚   â””â”€â”€ user_repo.go
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ service/         # ç¬¬ä¸‰æ–¹æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ ai_service.go      # AI å†…å®¹å®¡æ ¸ (CheckContent)
â”‚   â”‚       â””â”€â”€ ai_service_test.go
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/        # Gin ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.go          # CORS, Logger, Recovery, JWT é‰´æƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ pkg/               # å†…éƒ¨å…¬å…±åŒ… (ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„å·¥å…·)
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â””â”€â”€ database.go  # æ•°æ®åº“åˆå§‹åŒ– (InitDB)
â”‚   â”‚   â”œâ”€â”€ err/
â”‚   â”‚   â”‚   â”œâ”€â”€ msg.go     # ç»Ÿä¸€ä¸šåŠ¡é”™è¯¯ç 
â”‚   â”‚   â”‚   â””â”€â”€ msg_test.go
â”‚   â”‚   â”œâ”€â”€ logger/
â”‚   â”‚   â”‚   â””â”€â”€ logger.go    # Zap æ—¥å¿—åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ seeder/
â”‚   â”‚   â”‚   â””â”€â”€ seeder.go    # æ•°æ®åº“åˆå§‹æ•°æ®å¡«å……
â”‚   â”‚   â””â”€â”€ util/
â”‚   â”‚       â”œâ”€â”€ jwt.go     # JWT Token ç”Ÿæˆä¸è§£æ
â”‚   â”‚       â””â”€â”€ jwt_test.go
â”‚   â”‚
â”‚   â””â”€â”€ router/
â”‚       â””â”€â”€ router.go        # è·¯ç”±é…ç½® (SetupRouter, æŒ‚è½½æ‰€æœ‰ API è·¯ç”±)
â”‚
â””â”€â”€ nginx/                   # Nginx é…ç½® (ç”¨äºåå‘ä»£ç†)
    â”œâ”€â”€ Dockerfile       # Nginx é•œåƒçš„ Dockerfile
    â””â”€â”€ nginx.conf       # Nginx åå‘ä»£ç†é…ç½® (å°† 80 ç«¯å£è½¬å‘åˆ° 8080)


---

## ğŸ§­ ä¸Šæ‰‹æŒ‡å—
æœ¬é¡¹ç›®ä¸ºå‰åç«¯åˆ†ç¦»çš„åç«¯éƒ¨åˆ†ï¼Œæ‰€æœ‰ API å‡é€šè¿‡ `docker-compose` å¯åŠ¨ï¼Œå¹¶é€šè¿‡ Nginx å®¹å™¨ç»Ÿä¸€æš´éœ²åœ¨ `80` ç«¯å£ã€‚


### å¼€å‘å‰çš„é…ç½®è¦æ±‚
- **Go**: `1.25.1` æˆ–æ›´é«˜ç‰ˆæœ¬ (å‚è§ `go.mod` å’Œ `Dockerfile`)
- **Docker**: æœ€æ–°ç¨³å®šç‰ˆ
- **Docker Compose**: æœ€æ–°ç¨³å®šç‰ˆ
- **AI æœåŠ¡**: éœ€è¦ä¸€ä¸ª [Silicon Flow](https://siliconflow.cn/) è´¦å·ä»¥è·å– API Keyã€‚


### å®‰è£…ä¸å¯åŠ¨
1.  åœ¨ [Silicon Flow](https://siliconflow.cn/) æ³¨å†Œå¹¶è·å–ä¸€ä¸ªå…è´¹çš„ API Keyã€‚

2.  å…‹éš†æœ¬é¡¹ç›®
    ```bash
    git clone [https://github.com/NCUHOME-Y/25-HACK-2-xueluocangyuan_wish_wall-BE.git](https://github.com/NCUHOME-Y/25-HACK-2-xueluocangyuan_wish_wall-BE.git)
    cd 25-HACK-2-xueluocangyuan_wish_wall-BE
    ```
3.  åˆ›å»ºå¹¶é…ç½® `.env` æ–‡ä»¶
    åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆ`docker-compose.yml` æ‰€åœ¨ä½ç½®ï¼‰åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶ã€‚**è¯·å‚è€ƒä¸‹ä¸€ç« èŠ‚** `ğŸ”‘ ç¯å¢ƒå˜é‡é…ç½® (.env)` äº†è§£æ‰€æœ‰å¿…å¡«å’Œå¯é€‰å­—æ®µã€‚

4.  ä½¿ç”¨ Docker Compose å¯åŠ¨æœåŠ¡
    ```bash
    # --build ä¼šå¼ºåˆ¶é‡æ–°æ„å»ºé•œåƒ
    docker-compose up --build
    ```
    æœåŠ¡å¯åŠ¨åï¼ŒAPI å°†åœ¨ `http://localhost:80/api` (ç”± Nginx ä»£ç†) å¯è®¿é—®ã€‚MySQL æ•°æ®åº“å°†æš´éœ²åœ¨ `http://localhost:3307`ã€‚

### å¼€å‘çš„æ¶æ„
æœ¬é¡¹ç›®é‡‡ç”¨**å®¹å™¨åŒ–ä¸‰å±‚æ¶æ„**ï¼š

- **åå‘ä»£ç† (Nginx):** ä½œä¸ºåº”ç”¨çš„ç»Ÿä¸€å…¥å£ (Nginx å®¹å™¨)ï¼Œç›‘å¬ `80` ç«¯å£ï¼Œå¹¶å°†æ‰€æœ‰è¯·æ±‚åå‘ä»£ç†åˆ° Go åº”ç”¨çš„ `8080` ç«¯å£ (å‚è§ `nginx/nginx.conf`)ã€‚
- **åç«¯åº”ç”¨ (Go/Gin):** è¿è¡Œåœ¨ `qpp` å®¹å™¨ä¸­ã€‚è´Ÿè´£å¤„ç†æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€JWT é‰´æƒã€æ•°æ®åº“æ“ä½œå’Œ AI å®¡æ ¸ã€‚
- **æ•°æ®åº“ (MySQL):** è¿è¡Œåœ¨ `db` å®¹å™¨ä¸­ï¼Œé€šè¿‡ Docker çš„å†…éƒ¨ç½‘ç»œ (`wish-network`) ä¸ Go åº”ç”¨é€šä¿¡ï¼Œæ•°æ®é€šè¿‡ `volumes` (db_data) æŒä¹…åŒ–åœ¨å®¿ä¸»æœºã€‚

Go åº”ç”¨å†…éƒ¨éµå¾ªï¼š`router` -> `middleware` -> `handler` -> `service` / `model` çš„æ ‡å‡†åˆ†å±‚ã€‚

### éƒ¨ç½²
éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆå¦‚äº‘æœåŠ¡å™¨ï¼‰çš„æ­¥éª¤å¦‚ä¸‹ï¼š

1.  åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… `docker` å’Œ `docker-compose`ã€‚
2.  `git clone` ä½ çš„ä»“åº“ã€‚
3.  **å®‰å…¨æç¤ºï¼š** **è¯·å‹¿** ä¸Šä¼ ä½ æœ¬åœ°çš„ `.env` æ–‡ä»¶ã€‚è¯·åœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ `.env` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥**ç”Ÿäº§ç¯å¢ƒä¸“ç”¨**çš„æ•°æ®åº“å¯†ç ã€`JWT_SECRET` å’Œ `SILICONFLOW_API_KEY`ã€‚
4.  **é‡è¦ï¼š** åœ¨ç”Ÿäº§ç¯å¢ƒçš„ `.env` æ–‡ä»¶ä¸­ï¼Œå°† `GIN_MODE` è®¾ç½®ä¸º `release`ã€‚è¿™å°†å…³é—­ `debug` æ—¥å¿—å¹¶åœæ­¢æ•°æ®å¡«å…… (Seeder)ã€‚
5.  åœ¨åå°æ„å»ºå¹¶å¯åŠ¨æœåŠ¡ï¼š
    ```bash
    docker-compose up -d --build
    ```

---

## ğŸ”‘ ç¯å¢ƒå˜é‡é…ç½® (.env)
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ã€‚`docker-compose` å’Œ Go åº”ç”¨ï¼ˆé€šè¿‡ `godotenv`ï¼‰éƒ½ä¼šè¯»å–æ­¤æ–‡ä»¶ã€‚

```env
# --- Go åº”ç”¨ (qpp) å’Œ MySQL (db) å®¹å™¨å…±ç”¨ ---
# æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² (ä¾› Go åº”ç”¨åœ¨ Docker å†…éƒ¨è¿æ¥ db å®¹å™¨)
MYSQL_DSN="root:your_password@tcp(db:3306)/wish_wall?charset=utf8mb4&parseTime=True&loc=Local"

# ä¾› docker-compose å¯åŠ¨ MySQL å®¹å™¨ä½¿ç”¨
MYSQL_ROOT_PASSWORD=your_password
MYSQL_DATABASE=wish_wall

# --- Go åº”ç”¨ (qpp) ä¸“ç”¨ ---
# GIN æ¨¡å¼ (debug æˆ– release)ã€‚"release" æ¨¡å¼ä¼šå…³é—­ seederã€å…³é—­ zap çš„ debug æ—¥å¿—
GIN_MODE="debug"

# JWT å¯†é’¥ (è¯·ä¿®æ”¹ä¸ºä¸€ä¸ªå¤æ‚çš„éšæœºå­—ç¬¦ä¸²)
JWT_SECRET="my_strong_secret_key!"

# åº”ç”¨çŠ¶æ€ (V1/V2 åˆ‡æ¢)
# "v1": å¯ç”¨æ‰€æœ‰ API (è¯»å†™æ¨¡å¼)
# "v2" (æˆ–å…¶ä»–): ç¦ç”¨ POST/PUT/DELETE APIï¼Œå˜ä¸º"åªè¯»"æ¨¡å¼ (å‚è§ router.go)
ACTIVE_ACTIVITY="v1"

# Silicon Flow API Key (ç”¨äº AI å†…å®¹å®¡æ ¸)
SILICONFLOW_API_KEY=sk-your-real-api-key-here

# Silicon Flow API åŸºç¡€ URL (å¯é€‰, é»˜è®¤ä¸º [https://api.siliconflow.cn/v1](https://api.siliconflow.cn/v1))
# SILICONFLOW_BASE_URL="[https://api.siliconflow.cn/v1](https://api.siliconflow.cn/v1)"

# (å¯é€‰) ç”¨äºæœ¬åœ°æµ‹è¯•çš„æ•°æ®åº“ DSN (è¿è¡Œ go test æ—¶ä½¿ç”¨)
MYSQL_TEST_DSN="root:your_password@tcp(127.0.0.1:3307)/wish_wall_test?charset=utf8mb4&parseTime=True&loc=Local"



---

### ğŸ§ª è¿è¡Œæµ‹è¯•
æœ¬é¡¹ç›®åŒ…å«ä¸°å¯Œçš„å•å…ƒå’Œé›†æˆæµ‹è¯• (å‚è§ *_test.go æ–‡ä»¶)ã€‚ç¡®ä¿æµ‹è¯•æ•°æ®åº“å·²è¿è¡Œï¼šæµ‹è¯•ä¾èµ–äº MYSQL_TEST_DSN ç¯å¢ƒå˜é‡ã€‚è¯·ç¡®ä¿ docker-compose.yml ä¸­ db æœåŠ¡çš„ 3307:3306 ç«¯å£æ˜ å°„å·²å¼€å¯ï¼Œå¹¶ä¸”æœåŠ¡åœ¨è¿è¡Œä¸­ã€‚ç¡®ä¿ .env æ–‡ä»¶å­˜åœ¨ï¼šæµ‹è¯•ä¼šåŠ è½½æ ¹ç›®å½•çš„ .env æ–‡ä»¶æ¥è·å– MYSQL_TEST_DSN å’Œ SILICONFLOW_API_KEYã€‚è¿è¡Œæµ‹è¯•ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼šBash
```
go test ./... -v
```
( -v å‚æ•°ä¼šæ˜¾ç¤ºè¯¦ç»†çš„æµ‹è¯•è¾“å‡ºã€‚)

### ğŸ“š API æ¥å£æ–‡æ¡£
(ä»¥ä¸‹è·¯ç”±åŸºäº ACTIVE_ACTIVITY="v1" æ¨¡å¼)

#### ğŸ“¦ API å“åº”æ ¼å¼

æˆåŠŸå“åº” (HTTP 200):
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": { ... } // ä¸šåŠ¡æ•°æ®
}
```

å¤±è´¥å“åº” (HTTP 4xx / 5xx):
```json
{
  "code": <int>, // ä¸šåŠ¡é”™è¯¯ç  (å‚è§ internal/pkg/err/msg.go)
  "message": "<string>", // é”™è¯¯ä¿¡æ¯
  "data": {
    "error": "<string>" // (å¯é€‰) æ›´è¯¦ç»†çš„é”™è¯¯æè¿°
  }
}
```

#### å…¬å¼€æ¥å£ (æ— éœ€è®¤è¯)

| è·¯å¾„                        | æ–¹æ³• | æè¿°                          |
|---------------------------|------|-----------------------------|
| /api/register              | POST | ç”¨æˆ·æ³¨å†Œ (å« AI æ˜µç§°å®¡æ ¸)         |
| /api/login                 | POST | ç”¨æˆ·ç™»å½•                       |
| /api/app-state             | GET  | è·å–åº”ç”¨çŠ¶æ€ (V1/V2)              |
| /api/wishes/public         | GET  | è·å–å…¬å…±æ„¿æœ›åˆ—è¡¨ (å¯é€‰é‰´æƒ)       |
| /api/wishes/:id/comments   | GET  | åˆ—å‡ºæŸä¸ªæ„¿æœ›çš„è¯„è®º               |
| /api/test-ai               | POST | (æµ‹è¯•ç”¨) AI å†…å®¹å®¡æ ¸è®¤è¯æ¥å£      |

#### è®¤è¯æ¥å£ (éœ€è¦ `Authorization: Bearer <token>`)

| è·¯å¾„                        | æ–¹æ³• | æè¿°                          |
|---------------------------|------|-----------------------------|
| /api/user/me               | GET  | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯               |
| /api/user                  | PUT  | æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯ (å« AI æ˜µç§°å®¡æ ¸)|
| /api/wishes                | POST | å‘å¸ƒæ–°æ„¿æœ› (å« AI å†…å®¹å®¡æ ¸)      |
| /api/wishes/me             | GET  | è·å–ä¸ªäººæ„¿æœ›                    |
| /api/wishes/:id            | DELETE | åˆ é™¤æ„¿æœ› (ä»…é™ä½œè€…)            |
| /api/wishes/:id/like       | POST | ç‚¹èµ/å–æ¶ˆç‚¹èµæ„¿æœ›               |
| /api/wishes/:id/interactions | GET (V1) | è·å–æ„¿æœ›äº’åŠ¨è¯¦æƒ…           |
| /api/comments              | POST | åˆ›å»ºæ–°è¯„è®º (å« AI å†…å®¹å®¡æ ¸)     |
| /api/comments/:id          | DELETE | åˆ é™¤è‡ªå·±çš„è¯„è®º (æˆ–ç®¡ç†å‘˜/æ„¿æœ›ä½œè€…) |
| /api/comments/reply        | POST (V1) | å›å¤è¯„è®º (å« AI å†…å®¹å®¡æ ¸)    |

#### API è¯¦æƒ…ç¤ºä¾‹

1. ç”¨æˆ·æ³¨å†Œ (POST /api/register)

è¯·æ±‚ä½“:
```json
{
  "username": "1234567890",
  "password": "mypassword123",
  "nickname": "æˆ‘çš„æ˜µç§°"
}
```

æˆåŠŸå“åº” (200):
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": {
    "token": "eyJh...<JWT_TOKEN>...wA",
    "user": {
      "id": 1,
      "username": "1234567890",
      "nickname": "æˆ‘çš„æ˜µç§°",
      "avatarID": null,
      "role": "user",
      "createdAt": "2025-11-12T07:14:00Z"
    }
  }
}
```

é”™è¯¯å“åº” (400 - æ˜µç§°è¿è§„):
```json
{
  "code": 4,
  "message": "å‚æ•°éªŒè¯å¤±è´¥",
  "data": {
    "error": "æ˜µç§°åŒ…å«ä¸å½“å†…å®¹ï¼Œè¯·ä¿®æ”¹"
  }
}
```

2. å‘å¸ƒæ–°æ„¿æœ› (POST /api/wishes)

è¯·æ±‚å¤´: Authorization: Bearer <JWT_TOKEN>

è¯·æ±‚ä½“:
```json
{
  "content": "æˆ‘å¸Œæœ›æœŸæœ«è€ƒè¯•é¡ºåˆ©é€šè¿‡ï¼",
  "isPublic": true,
  "background": "default"
}
```

æˆåŠŸå“åº” (200):
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": {
    "wishID": 10,
    "createdAt": "2025-11-12T07:15:00Z"
  }
}
```

é”™è¯¯å“åº” (400 - å†…å®¹è¿è§„):
```json
{
  "code": 4,
  "message": "å‚æ•°éªŒè¯å¤±è´¥",
  "data": {
    "error": "å†…å®¹æœªé€šè¿‡å®¡æ ¸"
  }
}
```

3. ç‚¹èµæ„¿æœ› (POST /api/wishes/:id/like)

è¯·æ±‚å¤´: Authorization: Bearer <JWT_TOKEN>

è¯·æ±‚è·¯å¾„: /api/wishes/10/like

æˆåŠŸå“åº” (200 - ç‚¹èµæˆåŠŸ):
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": {
    "wishID": 10,
    "likeCount": 1,
    "liked": true
  }
}
```

æˆåŠŸå“åº” (200 - å–æ¶ˆç‚¹èµ):
```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": {
    "wishID": 10,
    "likeCount": 0,
    "liked": false
  }
}
```

---

### ğŸ› ï¸ ä½¿ç”¨åˆ°çš„æ¡†æ¶
- Gin Web æ¡†æ¶
- GORM ORM å·¥å…·
- go-openai OpenAI / Silicon Flow SDK
- jwt-go (v5) JWT é‰´æƒ
- Zap é«˜æ€§èƒ½æ—¥å¿—
- godotenv ç¯å¢ƒå˜é‡åŠ è½½
- Docker å®¹å™¨åŒ–
- Testify Go æµ‹è¯•æ–­è¨€åº“

### ğŸ“¦ ç‰ˆæœ¬æ§åˆ¶
è¯¥é¡¹ç›®ä½¿ç”¨ Git è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚

### ğŸ‰ é¸£è°¢
2025 Hackweek ç¬¬2ç»„æ‰€æœ‰æˆå‘˜  
æ‰€æœ‰ä¾èµ–åº“çš„ä½œè€…
